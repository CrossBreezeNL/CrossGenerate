<?xml version="1.0" encoding="UTF-8"?>
<XGenConfig>
  <Model>
    <ModelAttributeInjections>
      <!-- Override the fulldatatype for timestamp and rowid's to binary. -->
      <ModelAttributeInjection modelXPath="//attributes/attribute[@datatype='timestamp']" targetAttribute="fulldatatype" targetXPath="concat(substring-before(@fulldatatype,'timestamp'), 'binary(8)', substring-after(@fulldatatype,'timestamp'))"/>
      <!-- Override the fulldatatype for image(dupricated) to varbinary. -->
      <ModelAttributeInjection modelXPath="//attributes/attribute[@datatype='image']" targetAttribute="fulldatatype" targetXPath="concat(substring-before(@fulldatatype,'image'), 'varbinary(max)', substring-after(@fulldatatype,'image'))"/>
      <!-- Zet datatype voor Lava.ContactMethode.Waarde op nvarchar(100). -->
      <ModelAttributeInjection modelXPath="/modeldefinition/system[@name='Lava']/mappableObjects/entity[@name='ContactMethode']/attributes/attribute[@name='Waarde']" targetAttribute="fulldatatype" targetValue="nvarchar(100)"/>
      <ModelAttributeInjection modelXPath="/modeldefinition/system[@name='Lava']/mappableObjects/entity[@name='ContactMethode']/attributes/attribute[@name='Waarde']" targetAttribute="length" targetValue="100"/>
    </ModelAttributeInjections>
  </Model>
  <TextTemplate rootSectionName="table">
    <FileFormat currentAccessor="_" childAccessor="$" singleLineCommentPrefix="--" annotationPrefix="@XGen" annotationArgsPrefix="(" annotationArgsSuffix=")" />
    <Output type="output_per_element" />
  </TextTemplate>
  <Binding>
		<SectionModelBinding section="table" modelXPath="/modeldefinition/system/mappableObjects/entity[@fileType='csv']">
			<Placeholders>
				<Placeholder name="system" modelXPath="../.." />
			</Placeholders>
      <SectionModelBinding section="columnNormal" modelXPath="attributes/attribute[not(lower-case(@fulldatatype) = 'nvarchar(max)')]" />
        <SectionModelBinding section="columnLargeText" modelXPath="attributes/attribute[lower-case(@fulldatatype) = 'nvarchar(max)']" />
        <SectionModelBinding section="keyColumn" modelXPath="attributes/attribute[@primary='true']">
          <SectionModelBinding section="keyRegularColumn" modelXPath=".[not(@datatype='float' or @datatype='real' or @datatype='geometry')]" placeholderName="keyColumn" />
          <SectionModelBinding section="keyFloatColumn" modelXPath=".[@datatype='float' or @datatype='real']" placeholderName="keyColumn" />
          <SectionModelBinding section="keyGeometryColumn" modelXPath=".[@datatype='geometry']" placeholderName="keyColumn" />          
        </SectionModelBinding>
        <SectionModelBinding section="nonKeyColumn" modelXPath="attributes/attribute[not(@primary='true')]">
          <SectionModelBinding section="nonKeyRegularColumn" modelXPath=".[not(@datatype='float' or @datatype='real' or @datatype='geometry')]" placeholderName="nonKeyColumn" />
          <SectionModelBinding section="nonKeyFloatColumn" modelXPath=".[@datatype='float' or @datatype='real']" placeholderName="nonKeyColumn" />
          <SectionModelBinding section="nonKeyGeometryColumn" modelXPath=".[@datatype='geometry']" placeholderName="nonKeyColumn" />
        </SectionModelBinding>
        <!-- Section for part of the template which should be ignored. -->
        <SectionModelBinding section="ignore" modelXPath="attributes/attribute[0=1]" />
		</SectionModelBinding>
  </Binding>
</XGenConfig>